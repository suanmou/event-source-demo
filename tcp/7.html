<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TCP连接监控系统</title>
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Helvetica Neue', Arial, sans-serif;
    }
    
    body {
      background-color: #f5f7fa;
      padding: 20px;
      color: #333;
    }
    
    .app-container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid #ebeef5;
    }
    
    .header h1 {
      color: #2c3e50;
      font-weight: 600;
      font-size: 24px;
    }
    
    .stats-container {
      display: flex;
      margin-bottom: 24px;
      gap: 16px;
    }
    
    .stat-card {
      flex: 1;
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);
      display: flex;
      align-items: center;
    }
    
    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 16px;
    }
    
    .connections-icon {
      background-color: #ecf5ff;
      color: #409eff;
    }
    
    .nodes-icon {
      background-color: #f0f9eb;
      color: #67c23a;
    }
    
    .warning-icon {
      background-color: #fdf6ec;
      color: #e6a23c;
    }
    
    .error-icon {
      background-color: #fef0f0;
      color: #f56c6c;
    }
    
    .stat-content h3 {
      font-size: 14px;
      color: #909399;
      margin-bottom: 8px;
    }
    
    .stat-content .number {
      font-size: 28px;
      font-weight: 600;
    }
    
    .connections-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
      gap: 20px;
    }
    
    .connection-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);
    }
    
    .card-header {
      padding: 16px 20px;
      background: #f5f7fa;
      border-bottom: 1px solid #ebeef5;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .connection-title {
      font-weight: 600;
      color: #2c3e50;
      font-size: 16px;
    }
    
    .connection-status {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }
    
    .status-active {
      background-color: #ecf5ff;
      color: #409eff;
    }
    
    .status-warning {
      background-color: #fdf6ec;
      color: #e6a23c;
    }
    
    .card-body {
      padding: 20px;
    }
    
    .timeline-container {
      position: relative;
      padding-left: 20px;
    }
    
    .timeline-item {
      position: relative;
      padding: 0 0 24px 28px;
      border-left: 2px solid #ebeef5;
    }
    
    .timeline-item:last-child {
      border-left: 2px solid transparent;
    }
    
    .timeline-item::before {
      content: '';
      position: absolute;
      left: -9px;
      top: 0;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #dcdfe6;
    }
    
    .node-content {
      background: #f8f9fa;
      border-radius: 6px;
      padding: 12px 16px;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .node-content:hover {
      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
    }
    
    .node-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .node-ip {
      font-weight: 600;
      color: #2c3e50;
    }
    
    .node-status {
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 500;
    }
    
    .status-normal {
      background-color: #e1f3d8;
      color: #67c23a;
    }
    
    .status-error {
      background-color: #fde2e2;
      color: #f56c6c;
    }
    
    .status-warning {
      background-color: #faecd8;
      color: #e6a23c;
    }
    
    .node-info {
      display: flex;
      margin-top: 8px;
      color: #606266;
      font-size: 13px;
    }
    
    .node-info span {
      margin-right: 16px;
    }
    
    .node-reason {
      margin-top: 8px;
      padding: 8px;
      background: #fef0f0;
      border-left: 3px solid #f56c6c;
      color: #f56c6c;
      font-size: 12px;
      border-radius: 0 4px 4px 0;
    }
    
    .filters {
      display: flex;
      margin-bottom: 20px;
      gap: 16px;
    }
    
    .filter-group {
      display: flex;
      align-items: center;
    }
    
    .filter-label {
      margin-right: 10px;
      font-size: 14px;
      color: #606266;
    }
    
    .no-data {
      text-align: center;
      padding: 40px 0;
      color: #909399;
    }
    
    .legend {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 20px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      font-size: 13px;
    }
    
    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 6px;
    }
    
    .legend-normal {
      background-color: #67c23a;
    }
    
    .legend-warning {
      background-color: #e6a23c;
    }
    
    .legend-error {
      background-color: #f56c6c;
    }
    
    @media (max-width: 768px) {
      .connections-container {
        grid-template-columns: 1fr;
      }
      
      .stats-container {
        flex-direction: column;
      }
      
      .filters {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div id="app" class="app-container">
    <div class="header">
      <h1>TCP连接监控系统</h1>
      <div>
        <el-button type="primary" icon="el-icon-refresh">刷新数据</el-button>
        <el-button icon="el-icon-setting">系统设置</el-button>
      </div>
    </div>
    
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon connections-icon">
          <i class="el-icon-connection" style="font-size: 28px;"></i>
        </div>
        <div class="stat-content">
          <h3>活跃连接</h3>
          <div class="number">18</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon nodes-icon">
          <i class="el-icon-cpu" style="font-size: 28px;"></i>
        </div>
        <div class="stat-content">
          <h3>监控节点</h3>
          <div class="number">42</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon warning-icon">
          <i class="el-icon-warning" style="font-size: 28px;"></i>
        </div>
        <div class="stat-content">
          <h3>警告节点</h3>
          <div class="number">5</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon error-icon">
          <i class="el-icon-error" style="font-size: 28px;"></i>
        </div>
        <div class="stat-content">
          <h3>异常节点</h3>
          <div class="number">3</div>
        </div>
      </div>
    </div>
    
    <div class="filters">
      <div class="filter-group">
        <span class="filter-label">连接状态:</span>
        <el-select v-model="filterStatus" placeholder="全部状态" size="medium">
          <el-option label="全部" value="all"></el-option>
          <el-option label="正常" value="active"></el-option>
          <el-option label="异常" value="error"></el-option>
        </el-select>
      </div>
      
      <div class="filter-group">
        <span class="filter-label">节点状态:</span>
        <el-select v-model="filterNodeStatus" placeholder="全部节点" size="medium">
          <el-option label="全部" value="all"></el-option>
          <el-option label="正常" value="normal"></el-option>
          <el-option label="警告" value="warning"></el-option>
          <el-option label="异常" value="error"></el-option>
        </el-select>
      </div>
      
      <div class="filter-group">
        <span class="filter-label">搜索:</span>
        <el-input 
          v-model="searchQuery" 
          placeholder="输入连接ID或IP地址" 
          size="medium"
          style="width: 240px;"
          prefix-icon="el-icon-search"
        ></el-input>
      </div>
    </div>
    
    <div class="connections-container">
      <div 
        class="connection-card" 
        v-for="(conn, index) in filteredConnections" 
        :key="conn.id"
      >
        <div class="card-header">
          <div class="connection-title">连接ID: {{ conn.id }} (客户端: {{ conn.clientIp }})</div>
          <div :class="['connection-status', conn.status === 'active' ? 'status-active' : 'status-warning']">
            {{ conn.status === 'active' ? '正常' : '异常' }}
          </div>
        </div>
        
        <div class="card-body">
          <div class="timeline-container">
            <div 
              class="timeline-item" 
              v-for="(node, nodeIndex) in conn.nodes" 
              :key="nodeIndex"
            >
              <div class="node-content">
                <div class="node-header">
                  <div class="node-ip">节点 {{ nodeIndex + 1 }}: {{ node.ip }}</div>
                  <div :class="['node-status', `status-${node.status}`]">
                    {{ node.status === 'normal' ? '正常' : node.status === 'warning' ? '警告' : '异常' }}
                  </div>
                </div>
                
                <div class="node-info">
                  <span>位置: {{ node.location }}</span>
                  <span>延迟: {{ node.latency }}ms</span>
                  <span>负载: {{ node.load }}%</span>
                </div>
                
                <div class="node-reason" v-if="node.reason">
                  <i class="el-icon-warning"></i> {{ node.reason }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div v-if="filteredConnections.length === 0" class="connection-card">
        <div class="no-data">
          <i class="el-icon-search" style="font-size: 48px; margin-bottom: 16px;"></i>
          <p>未找到匹配的连接</p>
        </div>
      </div>
    </div>
    
    <div class="legend">
      <div class="legend-item">
        <div class="legend-color legend-normal"></div>
        <span>正常节点</span>
      </div>
      <div class="legend-item">
        <div class="legend-color legend-warning"></div>
        <span>警告节点</span>
      </div>
      <div class="legend-item">
        <div class="legend-color legend-error"></div>
        <span>异常节点</span>
      </div>
    </div>
  </div>

  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          filterStatus: 'all',
          filterNodeStatus: 'all',
          searchQuery: '',
          connections: [
            {
              id: 'TCP-20230808-001',
              clientIp: '192.168.1.105',
              status: 'active',
              nodes: [
                {
                  ip: '10.10.1.1',
                  location: '北京数据中心',
                  latency: 12,
                  load: 25,
                  status: 'normal'
                },
                {
                  ip: '10.10.2.3',
                  location: '上海数据中心',
                  latency: 28,
                  load: 42,
                  status: 'warning',
                  reason: 'CPU负载高于预警阈值'
                },
                {
                  ip: '10.10.3.5',
                  location: '广州数据中心',
                  latency: 18,
                  load: 32,
                  status: 'normal'
                },
                {
                  ip: '10.10.4.2',
                  location: '深圳数据中心',
                  latency: 22,
                  load: 28,
                  status: 'normal'
                }
              ]
            },
            {
              id: 'TCP-20230808-007',
              clientIp: '192.168.1.122',
              status: 'error',
              nodes: [
                {
                  ip: '10.10.1.1',
                  location: '北京数据中心',
                  latency: 11,
                  load: 28,
                  status: 'normal'
                },
                {
                  ip: '10.10.2.4',
                  location: '上海数据中心',
                  latency: 35,
                  load: 65,
                  status: 'warning',
                  reason: '高延迟，网络拥塞'
                },
                {
                  ip: '10.10.3.7',
                  location: '广州数据中心',
                  latency: 15,
                  load: 38,
                  status: 'normal'
                },
                {
                  ip: '10.10.4.8',
                  location: '深圳数据中心',
                  latency: 210,
                  load: 88,
                  status: 'error',
                  reason: '节点连接超时，请检查服务状态'
                }
              ]
            },
            {
              id: 'TCP-20230808-012',
              clientIp: '192.168.1.201',
              status: 'active',
              nodes: [
                {
                  ip: '10.10.1.2',
                  location: '北京数据中心',
                  latency: 15,
                  load: 32,
                  status: 'normal'
                },
                {
                  ip: '10.10.2.1',
                  location: '上海数据中心',
                  latency: 22,
                  load: 45,
                  status: 'normal'
                },
                {
                  ip: '10.10.3.2',
                  location: '广州数据中心',
                  latency: 18,
                  load: 28,
                  status: 'normal'
                }
              ]
            },
            {
              id: 'TCP-20230808-015',
              clientIp: '192.168.1.088',
              status: 'error',
              nodes: [
                {
                  ip: '10.10.1.3',
                  location: '北京数据中心',
                  latency: 14,
                  load: 35,
                  status: 'normal'
                },
                {
                  ip: '10.10.2.5',
                  location: '上海数据中心',
                  latency: 42,
                  load: 72,
                  status: 'error',
                  reason: '内存使用率超过90%'
                },
                {
                  ip: '10.10.3.4',
                  location: '广州数据中心',
                  latency: 25,
                  load: 48,
                  status: 'warning',
                  reason: '磁盘I/O过高'
                },
                {
                  ip: '10.10.4.3',
                  location: '深圳数据中心',
                  latency: 18,
                  load: 32,
                  status: 'normal'
                }
              ]
            }
          ]
        }
      },
      computed: {
        filteredConnections() {
          let result = this.connections;
          
          // 按连接状态过滤
          if (this.filterStatus !== 'all') {
            result = result.filter(conn => conn.status === this.filterStatus);
          }
          
          // 按节点状态过滤
          if (this.filterNodeStatus !== 'all') {
            result = result.filter(conn => 
              conn.nodes.some(node => node.status === this.filterNodeStatus)
            );
          }
          
          // 按搜索词过滤
          if (this.searchQuery) {
            const query = this.searchQuery.toLowerCase();
            result = result.filter(conn => 
              conn.id.toLowerCase().includes(query) ||
              conn.clientIp.includes(query) ||
              conn.nodes.some(node => node.ip.includes(query))
            );
          }
          
          return result;
        }
      }
    });
  </script>
</body>
</html>